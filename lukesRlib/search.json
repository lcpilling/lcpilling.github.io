[{"path":"https://lcpilling.github.io/lukesRlib/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Luke Pilling. Author, maintainer.","code":""},{"path":"https://lcpilling.github.io/lukesRlib/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Pilling L (2024). lukesRlib: library R functions sometimes find useful. https://lcpilling.github.io/lukesRlib, https://github.com/lcpilling/lukesRlib.","code":"@Manual{,   title = {lukesRlib: My library of R functions I sometimes find useful},   author = {Luke Pilling},   year = {2024},   note = {https://lcpilling.github.io/lukesRlib, https://github.com/lcpilling/lukesRlib}, }"},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"lukesrlib-","dir":"","previous_headings":"","what":"My library of R functions I sometimes find useful","title":"My library of R functions I sometimes find useful","text":"library R functions sometimes find useful Toolbox icon https://vectorified.com/icon-tool-box","code":""},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"list-of-functions","dir":"","previous_headings":"","what":"List of functions","title":"My library of R functions I sometimes find useful","text":"Hypothesis testing Data Transformation Working test statistics Plotting-related","code":""},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"My library of R functions I sometimes find useful","text":"install development version GitHub use remotes package:","code":"remotes::install_github(\"lcpilling/lukesRlib\")  remotes::install_github(\"lcpilling/lukesRlib@*release\") # To install the latest release remotes::install_github(\"lcpilling/lukesRlib@v0.2.0\")   # To install a specific version (see tags)"},{"path":[]},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"tidy_ci","dir":"","previous_headings":"Hypothesis testing","what":"tidy_ci()","title":"My library of R functions I sometimes find useful","text":"tidy_ci() (“tidy CIs”) runs broom::tidy() returns tidy estimates CIs calculated EST +/- 1.96*SE (.e., Wald method) Motivation: default {broom} package uses confint() estimate CIs. GLMs calculates CIs via profile likelihood method. using large datasets takes long time meaningfully alter CIs compared calculating using 1.96*SE tidy_ci() nice things: hides intercept default, automatically detects logistic/CoxPH/CRR models exponentiates estimates, p==0 returns ‘extreme p’ string. options include -log10 p-values. See tidy_ci() Wiki page details","code":""},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"examples","dir":"","previous_headings":"Hypothesis testing > tidy_ci()","what":"Examples","title":"My library of R functions I sometimes find useful","text":"Provided N R^2 estimate. Calculated “extreme p” p rounded 0 Automatically identified input coxph model exponentiated estimate/CIs. Also provided N Nevents. Also, tidied “.factor()” variable names. haven::as_factor() used labels shown correctly.","code":"fit_linear = glm(bmi ~ age + sex, data = d) tidy_ci(fit_linear) #> Linear model (estimate=coefficient) :: N=449811 :: R2=0.0099 #> # A tibble: 2 x 8 #>   term  estimate std.error statistic   p.value conf.low conf.high p.extreme #>   <chr>    <dbl>     <dbl>     <dbl>     <dbl>    <dbl>     <dbl> <chr>     #> 1 age     0.0196  0.000847     23.1  4.72e-118   0.0179    0.0212 NA        #> 2 sex     0.703   0.0137       51.4  0           0.676     0.729  9.39e-576 library(survival) fit_coxph = coxph(Surv(time, status) ~ age + sex + as.factor(smoking_status), data = d) tidy_ci(fit_coxph) #> CoxPH model (estimate=Hazard Ratio) :: N=449811, Nevents=31025 #> # A tibble: 4 x 8 #>   term             estimate std.error statistic  p.value conf.low conf.high #>   <chr>               <dbl>     <dbl>     <dbl>    <dbl>    <dbl>     <dbl> #> 1 age                 0.995  0.000837     -6.56 5.28e-11    0.993     0.996 #> 2 sex                 1.04   0.0109        3.66 2.52e- 4    1.02      1.06  #> 3 smoking_status-1    1.04   0.0120        3.26 1.13e- 3    1.02      1.06  #> 4 smoking_status-2    1.03   0.0149        2.16 3.08e- 2    1.00      1.06"},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"get_assoc","dir":"","previous_headings":"Hypothesis testing","what":"get_assoc()","title":"My library of R functions I sometimes find useful","text":"get_assoc() (phonetically: “get--sock”) makes PheWAS R easy fast. gets tidy model output categorical continuous exposures, linear, logistic, CoxPH models. Output includes N N cases, outcome, model info. User can provide multiples exposures outcomes.","code":""},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"example-categorical-exposure-in-logistic-regression","dir":"","previous_headings":"Hypothesis testing > get_assoc()","what":"Example: Categorical exposure in logistic regression","title":"My library of R functions I sometimes find useful","text":"estimate Odds Ratio logistic regression model, n n_cases show numbers category exposure (af=TRUE .e., treat factor), including reference group. Note labels haven::labelled() shown correctly.","code":"get_assoc(x=\"smoking_status\", y=\"chd\", z=\"+age\", d=ukb, model=\"logistic\", af=TRUE) #> A tibble: 3 x 12 #>   outcome exposure               estimate std.error statistic p.value conf.low conf.high     n n_cases model    #>   <chr>   <chr>                     <dbl>     <dbl>     <dbl>   <dbl>    <dbl>     <dbl> <dbl>   <dbl> <chr>    #> 1 chd     smoking_status-Never       NA       NA         NA    NA        NA         NA    1073     146 logistic #> 2 chd     smoking_status-Former      1.24     0.126      1.72  0.0852    0.970      1.59   918     180 logistic #> 3 chd     smoking_status-Current     1.48     0.181      2.16  0.0311    1.04       2.11   285      52 logistic"},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"example-multiple-exposures-on-single-outcome-ie-a-phewas","dir":"","previous_headings":"Hypothesis testing > get_assoc()","what":"Example: Multiple exposures on single outcome (i.e., a “PheWAS”)","title":"My library of R functions I sometimes find useful","text":"Multiple exposures outcomes can provided simultaneously. , exposures continuous.","code":"x_vars = c(\"bmi\",\"ldl\",\"sbp\") get_assoc(x=x_vars, y=\"chd\", z=\"+age+sex\", d=ukb, model=\"logistic\") #> # A tibble: 3 x 11 #>   outcome exposure estimate std.error statistic p.value conf.low conf.high     n n_cases model    #>   <chr>   <chr>       <dbl>     <dbl>     <dbl>   <dbl>    <dbl>     <dbl> <int>   <int> <chr>    #> 1 chd     bmi         1.08    0.0113      6.97  3.1e-12    1.06       1.11  4692     324 logistic #> 2 chd     ldl         0.980   0.0689     -0.300 7.6e- 1    0.856      1.12  4498     311 logistic #> 3 chd     sbp         1.01    0.00333     3.53  4.2e- 4    1.01       1.02  4561     316 logistic"},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"example-stratified-analyses","dir":"","previous_headings":"Hypothesis testing > get_assoc()","what":"Example: stratified analyses","title":"My library of R functions I sometimes find useful","text":"Data first argument. get_assoc() can right-side dplyr functions. Stratified models can therefore easily performed. note argument means output labelled can combined single data frame easily.","code":"res_all     = ukb |>                  get_assoc(x=x_vars, y=\"chd\", z=\"+age+sex\", model=\"logistic\", note=\"All\") res_males   = ukb |>                  filter(sex==\"Male\") |>                  get_assoc(x=x_vars, y=\"chd\", z=\"+age\", model=\"logistic\", note=\"Males\") res_females = ukb |>                  filter(sex==\"Female\") |>                  get_assoc(x=x_vars, y=\"chd\", z=\"+age\", model=\"logistic\", note=\"Females\")  res = list_rbind(list(res_all, res_males, res_females))"},{"path":[]},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"carrec","dir":"","previous_headings":"Data Transformation","what":"carrec()","title":"My library of R functions I sometimes find useful","text":"Steve Miller’s package: carrec() (phonetically: “car-wreck”) port car::recode() avoid clashes {car} package. offers STATA-like recoding features R. example, variable interest 1-10 scale want code values 6 1, code values 1-5 0, :","code":"x = seq(1, 10) x #> [1]  1  2  3  4  5  6  7  8  9 10  carrec(x, \"1:5=0;6:10=1\") #> [1] 0 0 0 0 0 1 1 1 1 1"},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"inv_norm","dir":"","previous_headings":"Data Transformation","what":"inv_norm()","title":"My library of R functions I sometimes find useful","text":"Inverse (quantile) normalise quantitative trait (vector) .e., transform normal distribution mean=0 sd=1","code":"x_in = inv_norm(x)  df = df |> mutate(x_in = inv_norm(x))"},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"z_trans","dir":"","previous_headings":"Data Transformation","what":"z_trans()","title":"My library of R functions I sometimes find useful","text":"Z-transform quantitative trait (vector) .e., convert mean=0 sd=1, maintaining original distribution","code":"x_z = z_trans(x)  df = df |> mutate(x_z = z_trans(x))"},{"path":[]},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"get_se","dir":"","previous_headings":"Working with test statistics","what":"get_se()","title":"My library of R functions I sometimes find useful","text":"Calculate Standard Error Confidence Intervals.","code":"lci = 0.1 uci = 0.3  # Default denominator is (1.96*2) equivalent to 95% confidence (p<0.05) get_se(lci, uci) #>  [1] 0.05102041  # custom denominator e.g., if CIs correspond to a p-value 5*10-8 get_se(lci, uci, denominator=lukesRlib::get_z(5e-8)*2)    #>  [1] 0.01834421"},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"get_z","dir":"","previous_headings":"Working with test statistics","what":"get_z()","title":"My library of R functions I sometimes find useful","text":"Return Z-statistic given p-value","code":"p = 1e-10 get_z(p) #>  [1] 6.466951"},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"get_p","dir":"","previous_headings":"Working with test statistics","what":"get_p()","title":"My library of R functions I sometimes find useful","text":"Return p-value z (t) statistic","code":"z = 10 get_p(z) #>  [1] 1.523971e-23"},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"get_p_extreme","dir":"","previous_headings":"Working with test statistics","what":"get_p_extreme()","title":"My library of R functions I sometimes find useful","text":"Normally R round numbers < 1*10-324 zero. function returns “extreme p-value” string. Provide z (t) statistic","code":"z = 50 get_p_extreme(z) #>  [1] \"2.16e-545\""},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"get_p_neglog10","dir":"","previous_headings":"Working with test statistics","what":"get_p_neglog10()","title":"My library of R functions I sometimes find useful","text":"Returns -log10 p-value. Provide z (t) statistic","code":"z = 50 get_p_neglog10(z) #>  [1] 544.6653"},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"get_p_neglog10_n","dir":"","previous_headings":"Working with test statistics","what":"get_p_neglog10_n()","title":"My library of R functions I sometimes find useful","text":"Returns -log10 p-value. Provide z (t) statistic n (sample size)","code":"z = 50 n = 100000 get_p_neglog10_n(z, n) #>  [1] 537.9851"},{"path":[]},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"annotate_textp","dir":"","previous_headings":"Plotting-related","what":"annotate_textp()","title":"My library of R functions I sometimes find useful","text":"Annotate ggplot2 plot text. Allows one specify relative position figure easily. Configurable margin, text box justification. added bonus following code can specify facet annotate something like facets=data.frame(cat1='blue', cat2='tall'). Function originally Rosen Matev (https://stackoverflow.com/questions/22488563/ggplot2-annotate-layer-position--r) get aligned nicely middle, may also require adjusting box_just depending plot width etc. options include size alpha","code":"qplot(1:10,1:10) + annotate_textp('Text annotation\\nx=1, y=0, hjust=1', x=1, y=0, hjust=1) qplot(1:10,1:10) + annotate_textp('Text annotation\\nx=0.1, y=0.9, hjust=0', x=0, y=1, hjust=0) qplot(1:10,1:10) + annotate_textp('Text annotation\\nx = 0.5, y=0.5, hjust=0.5\\nbox_just=c(0.5,0.5)', x=0.5, y=0.5, hjust=0.5, box_just=c(0.5,0.5)) qplot(1:10,1:10) + annotate_textp('Text annotation\\nx = 0.5, y=0.5, hjust=0.5\\nbox_just=c(0.5,0.5)\\nsize=14, alpha=0.5', x=0.5, y=0.5, hjust=0.5, box_just=c(0.5,0.5), size=13, alpha=0.5)"},{"path":"https://lcpilling.github.io/lukesRlib/index.html","id":"theme_minimal_modified","dir":"","previous_headings":"Plotting-related","what":"theme_minimal_modified()","title":"My library of R functions I sometimes find useful","text":"Nice modification ggplot’s theme_minimal Albert Rapp (https://alberts-newsletter.beehiiv.com/p/ggplot-theme)","code":"library(tidyverse) penguins <- palmerpenguins::penguins |>    filter(!is.na(sex))  basic_plot <- penguins |>    ggplot(aes(x = bill_length_mm, y = body_mass_g, fill = species)) +   geom_point(shape = 21, size = 5, alpha = 0.85, color = 'grey10') +   labs(     x = 'Bill length (in mm)',     y = element_blank(),     fill = 'Species',     title = 'Penguins from the Palmer Archipelago',     subtitle = 'Penguin weights (in g)',     caption = 'Data: {palmerpenguins} R package'   )  basic_plot +   theme_minimal(base_size = 16, base_family = 'Source Sans Pro') +   scale_fill_manual(values = c('Adelie'= '#da2c38', 'Chinstrap'= '#FED18C', 'Gentoo'= '#30C5FF')) +  # scale_fill_manual(values = thematic::okabe_ito(6)) +   theme_minimal_modified()"},{"path":"https://lcpilling.github.io/lukesRlib/reference/annotate_textp.html","id":null,"dir":"Reference","previous_headings":"","what":"Annotate a ggplot2 plot with text — annotate_textp","title":"Annotate a ggplot2 plot with text — annotate_textp","text":"One can specify relative position figure easily. Configurable margin, text box justification. added bonus following code can specify facet annotate something like facets=data.frame(cat1='blue', cat2='tall') Stack Overflow comment https://stackoverflow.com/questions/22488563/ggplot2-annotate-layer-position--r","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/annotate_textp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Annotate a ggplot2 plot with text — annotate_textp","text":"","code":"annotate_textp(   label,   x,   y,   facets = NULL,   hjust = 0,   vjust = 0,   color = \"black\",   alpha = NA,   family = thm$text$family,   size = thm$text$size,   fontface = 1,   lineheight = 1,   box_just = ifelse(c(x, y) < 0.5, 0, 1),   margin = unit(size/2, \"pt\"),   thm = ggplot2::theme_get() )"},{"path":"https://lcpilling.github.io/lukesRlib/reference/annotate_textp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Annotate a ggplot2 plot with text — annotate_textp","text":"label string. text plotted. x Numeric. X axis position (min=0, max=1 - relative plot margins) y Numeric. Y axis position (min=0, max=1 - relative plot margins) hjust Numeric. horizontal alignment  (0 = left, 0.5 = center, 1 = right). Default=0 alpha Numeric. Transparency (0:1). Default=NA size Numeric. Font size. Default=theme default","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/annotate_textp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Annotate a ggplot2 plot with text — annotate_textp","text":"Returns geom layer","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/annotate_textp.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Annotate a ggplot2 plot with text — annotate_textp","text":"Rosen Matev","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/annotate_textp.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Annotate a ggplot2 plot with text — annotate_textp","text":"","code":"p1 = ggplot2::ggplot(data.frame(x=1:10,y=1:10), ggplot2::aes(x,y)) + ggplot2::geom_point() p1 + annotate_textp('Text annotation\\nx=1, y=0, hjust=1', x=1, y=0, hjust=1) #> Error in unit(1, \"npc\"): could not find function \"unit\" p1 + annotate_textp('Text annotation\\nx=0.1, y=0.9, hjust=0', x=0, y=1, hjust=0) #> Error in unit(1, \"npc\"): could not find function \"unit\" p1 + annotate_textp('Text annotation\\nx = 0.5, y=0.5, hjust=0.5\\nbox_just=c(0.5,0.5)', x=0.5, y=0.5, hjust=0.5, box_just=c(0.5,0.5)) #> Error in unit(1, \"npc\"): could not find function \"unit\" p1 + annotate_textp('Text annotation\\nx = 0.5, y=0.5, hjust=0.5\\nbox_just=c(0.5,0.5)\\nsize=14, alpha=0.5', x=0.5, y=0.5, hjust=0.5, box_just=c(0.5,0.5), size=14, alpha=0.5) #> Error in unit(1, \"npc\"): could not find function \"unit\""},{"path":"https://lcpilling.github.io/lukesRlib/reference/carrec.html","id":null,"dir":"Reference","previous_headings":"","what":"Recode a Variable — carrec","title":"Recode a Variable — carrec","text":"Lifted straight Steve Miller's stevemisc package (v1.4.1).  recodes numeric vector, character vector, factor according fairly simple recode specifications former Stata users appreciate. Yes, taken John Fox's `recode()` function car package. going `carrec()` (.e. shorthand `car::recode()`, phonetically : \"car-wreck\") package. goal minimize number function clashes multiple packages use workflow. example: car, dplyr, Hmisc `recode()` functions. rely car package just function, conflicts tidyverse functions vital workflow.","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/carrec.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recode a Variable — carrec","text":"","code":"carrec(var, recodes, as_fac, as_num = TRUE, levels)"},{"path":"https://lcpilling.github.io/lukesRlib/reference/carrec.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recode a Variable — carrec","text":"var numeric vector, character vector, factor recodes character string recode specifications: see , former Stata users find stuff familiar as_fac return factor; default `TRUE` `var` factor,  `FALSE` otherwise as_num `TRUE` (default) `.factor` `FALSE`, result coerced numeric values result numeric. want majority applications regression analysis. levels optional argument specifying order levels returned factor; default use sort order level names. ... optional, make shortcut (`carr()`) work","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/carrec.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recode a Variable — carrec","text":"`carrec()` returns vector, recoded specifications user.","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/carrec.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Recode a Variable — carrec","text":"Recode specifications appear character string, separated semicolons (see examples ), form input=output. input value satisfies one specification, first (left right) applies. specification satisfied, input value carried result. NA allowed input output.","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/carrec.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Recode a Variable — carrec","text":"Fox, J. Weisberg, S. (2019). R Companion Applied Regression, Third Edition, Sage.","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/carrec.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Recode a Variable — carrec","text":"John Fox","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/carrec.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recode a Variable — carrec","text":"","code":"x <- seq(1,10) carrec(x,\"0=0;1:2=1;3:5=2;6:10=3\") #>  [1] 1 1 2 2 2 3 3 3 3 3"},{"path":"https://lcpilling.github.io/lukesRlib/reference/example_data.html","id":null,"dir":"Reference","previous_headings":"","what":"The Framingham Heart Study — example_data","title":"The Framingham Heart Study — example_data","text":"subset data Framingham Heart Study Syed S Mahmood et al. “Framingham Heart Study epidemiology cardiovascular disease: historical perspective”.  : lancet 383.9921 (2014), pp. 999–1008.6 Data downloaded SurvSet repository (https://github.com/ErikinBC/SurvSet),  described https://arxiv.org/pdf/2203.03094.pdf","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/example_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"The Framingham Heart Study — example_data","text":"","code":"example_data"},{"path":"https://lcpilling.github.io/lukesRlib/reference/example_data.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"The Framingham Heart Study — example_data","text":"## `example_data` data frame 4,699 rows 10 columns: event Event occurred follow-time Time event (censoring) sbp, dbp Systolic diastolic blood pressure scl scl age Age sex Sex month Month bmi_cat BMI 3 categories: healthy, overweight obese","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/example_data.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"The Framingham Heart Study — example_data","text":"<https://github.com/ErikinBC/SurvSet/blob/main/SurvSet/_datagen/output/Framingham.csv>","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_assoc.html","id":null,"dir":"Reference","previous_headings":"","what":"Get tidy model output of exposure(s) on outcome(s) — get_assoc","title":"Get tidy model output of exposure(s) on outcome(s) — get_assoc","text":"easily get tidy model output (linear logistic GLM, CoxPH) categorical continuous exposure, including sample size (N cases logistic), outcome, model info. Idea make quick PheWAS trivially easy. exposures, gets N. categorical exposures, N split group, row included reference category Can provide multiple exposures /outcomes","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_assoc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get tidy model output of exposure(s) on outcome(s) — get_assoc","text":"","code":"get_assoc(   d,   x,   y,   z = \"\",   model = \"lm\",   af = FALSE,   af_base = FALSE,   note = \"\",   get_fit = FALSE,   extreme_ps = FALSE,   scale_x = FALSE,   scale_y = FALSE,   inv_norm_x = FALSE,   inv_norm_y = FALSE,   winsorize_x = FALSE,   winsorize_y = FALSE,   winsorize_n = 5,   return_all_terms = FALSE,   interacts_with = \"\",   progress = TRUE,   verbose = FALSE,   ... )"},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_assoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get tidy model output of exposure(s) on outcome(s) — get_assoc","text":"d data.frame tibble. data. x string vector strings. exposure variable name(s), found `d`. (character) y string. outcome variable name, found `d` -- model 'coxph' paste survival object e.g., 'Surv(time, event)' `time` `event` variables `d`. (character) z string. covariate formula (e.g., \" + age + sex\"), found `d`. Default covariates.  default=\"\" (character) model string. type model perform. Can \"lm\", \"logistic\" \"coxph\". default=\"lm\" (character) af Logical. `x` categorical? .e., include formula like `haven::as_factor(x)`. use base R `.factor()` instead set option \"af_base\" TRUE default=FALSE af_base Logical. Use base R `.factor()` instead `haven::as_factor(x)`? default=FALSE note string. want include note like \"\", \"Males\", \"C282Y homozygotes\" describe model sample. default=\"\" (character) get_fit Logical. Default FALSE. Get model fit? (model: lm=R2, logistic=McFadden's pseudo-R2, coxph=Harrell's c-statistic). default=FALSE extreme_ps Logical. Default FALSE. p==0 return \"extreme p-values\" strings. default=FALSE scale_x Logical. Default FALSE. Apply scale() function exposure? default=FALSE scale_y Logical. Default FALSE. Apply scale() function outcome? default=FALSE inv_norm_x Logical. Apply inv_norm() function exposure? default=FALSE inv_norm_y Logical. Apply inv_norm() function outcome? default=FALSE winsorize_x Logical. Apply Winzorization exposure? default=FALSE winsorize_y Logical. Apply Winzorization outcome? default=FALSE winsorize_n Numeric. Standard deviations mean Winzorize. .e., participants values beyond N set N. default=5 return_all_terms Logical. Return estimates independent variables (terms) model? TRUE, includes adddition column 'term' default=FALSE interacts_with string. variable found `d`. add regression formula like `x*` catch output default=\"\" (character) progress Logical. Show progress bar purrr `map()` function (useful multiple exposures/outcomes provided). default=TRUE verbose Logical. verbose, default=FALSE ... `tidy_ci()` options","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_assoc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get tidy model output of exposure(s) on outcome(s) — get_assoc","text":"Returns tibble - summary statistics model","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_assoc.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Get tidy model output of exposure(s) on outcome(s) — get_assoc","text":"Luke Pilling","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_assoc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get tidy model output of exposure(s) on outcome(s) — get_assoc","text":"","code":"# for one outcome, equivalent to `tidy_ci(glm(sbp ~ bmi +age+sex, d=example_data))` - with added `n` get_assoc(x=\"bmi\", y=\"sbp\", z=\"+age+sex\", d=example_data) #> # A tibble: 1 × 10 #>   outcome exposure estimate std.error statistic  p.value conf.low conf.high #>   <chr>   <chr>       <dbl>     <dbl>     <dbl>    <dbl>    <dbl>     <dbl> #> 1 sbp     bmi          1.49    0.0730      20.4 5.42e-89     1.35      1.64 #> # ℹ 2 more variables: n <int>, model <chr>  # categorical exposure, binary outcome, and stratified analysis (with note) #  - note that data can be passed using the pipe if desired example_data |> dplyr::filter(sex==1) |>   get_assoc(x=\"bmi_cat\", y=\"event\", z=\"+age\", model=\"logistic\", af=TRUE, note=\"Males only\")  |> print(width=500) #> # A tibble: 3 × 12 #>   outcome exposure           estimate std.error statistic    p.value conf.low #>   <chr>   <chr>                 <dbl>     <dbl>     <dbl>      <dbl>    <dbl> #> 1 event   bmi_cat-Normal        NA      NA          NA    NA            NA    #> 2 event   bmi_cat-Overweight     1.50    0.0986      4.09  0.0000426     1.23 #> 3 event   bmi_cat-Obese          1.93    0.154       4.27  0.0000194     1.43 #>   conf.high     n n_cases model    note       #>       <dbl> <dbl>   <dbl> <chr>    <chr>      #> 1     NA      803     268 logistic Males only #> 2      1.82  1018     443 logistic Males only #> 3      2.60   226     111 logistic Males only  # multiple exposures and/or outcomes - get pseudo R^2 x_vars = c(\"bmi\",\"sbp\",\"dbp\",\"scl\") y_vars = c(\"event\",\"sex\") get_assoc(x=x_vars, y=y_vars, z=\"+age\", d=example_data, model=\"logistic\", get_fit=TRUE)  |> print(width=500) #> # A tibble: 8 × 13 #>   outcome exposure estimate std.error statistic  p.value conf.low conf.high #>   <chr>   <chr>       <dbl>     <dbl>     <dbl>    <dbl>    <dbl>     <dbl> #> 1 event   bmi         1.07   0.00791       9.07 1.19e-19    1.06       1.09 #> 2 sex     bmi         1.04   0.00736       5.09 3.54e- 7    1.02       1.05 #> 3 event   sbp         1.01   0.00149       8.86 7.80e-19    1.01       1.02 #> 4 sex     sbp         0.998  0.00141      -1.12 2.61e- 1    0.996      1.00 #> 5 event   dbp         1.03   0.00259       9.73 2.33e-22    1.02       1.03 #> 6 sex     dbp         1.01   0.00240       4.98 6.35e- 7    1.01       1.02 #> 7 event   scl         1.01   0.000749      9.47 2.69e-21    1.01       1.01 #> 8 sex     scl         0.999  0.000692     -1.08 2.82e- 1    0.998      1.00 #>       n n_cases fit_stat fit_stat_se model    #>   <int>   <int>    <dbl> <lgl>       <chr>    #> 1  4690    1472 0.0317   NA          logistic #> 2  4690    2047 0.00454  NA          logistic #> 3  4699    1473 0.0310   NA          logistic #> 4  4699    2049 0.000666 NA          logistic #> 5  4699    1473 0.0338   NA          logistic #> 6  4699    2049 0.00435  NA          logistic #> 7  4666    1466 0.0331   NA          logistic #> 8  4666    2042 0.000649 NA          logistic  # if desired, can also return estimates for other independent variables (terms) in the model x_vars = c(\"bmi\",\"sbp\",\"dbp\") get_assoc(x=x_vars, y=\"event\", z=\"+age+sex\", d=example_data, model=\"logistic\", return_all_terms=TRUE)  |> print(width=500) #> # A tibble: 9 × 12 #>   outcome exposure term  estimate std.error statistic  p.value conf.low #>   <chr>   <chr>    <chr>    <dbl>     <dbl>     <dbl>    <dbl>    <dbl> #> 1 event   bmi      bmi       1.07   0.00801      8.66 4.74e-18     1.06 #> 2 event   bmi      age       1.04   0.00388      8.95 3.47e-19     1.03 #> 3 event   bmi      sex       2.10   0.0654      11.3  1.02e-29     1.84 #> 4 event   sbp      sbp       1.01   0.00152      9.47 2.86e-21     1.01 #> 5 event   sbp      age       1.03   0.00412      6.15 7.89e-10     1.02 #> 6 event   sbp      sex       2.23   0.0658      12.2  4.15e-34     1.96 #> 7 event   dbp      dbp       1.02   0.00261      9.24 2.43e-20     1.02 #> 8 event   dbp      age       1.03   0.00394      8.07 7.03e-16     1.02 #> 9 event   dbp      sex       2.10   0.0655      11.3  1.01e-29     1.85 #>   conf.high     n n_cases model    #>       <dbl> <int>   <int> <chr>    #> 1      1.09  4690    1472 logistic #> 2      1.04    NA      NA logistic #> 3      2.38    NA      NA logistic #> 4      1.02  4699    1473 logistic #> 5      1.03    NA      NA logistic #> 6      2.53    NA      NA logistic #> 7      1.03  4699    1473 logistic #> 8      1.04    NA      NA logistic #> 9      2.39    NA      NA logistic"},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p.html","id":null,"dir":"Reference","previous_headings":"","what":"Get p-value from Z-statistic — get_p","title":"Get p-value from Z-statistic — get_p","text":"Return p-value z (t) statistic","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get p-value from Z-statistic — get_p","text":"","code":"get_p(z)"},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get p-value from Z-statistic — get_p","text":"z z (t) statistic","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get p-value from Z-statistic — get_p","text":"Returns p-value (numeric)","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Get p-value from Z-statistic — get_p","text":"internet (anon)","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get p-value from Z-statistic — get_p","text":"","code":"z = 10 get_p(z) #> [1] 1.523971e-23"},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p_extreme.html","id":null,"dir":"Reference","previous_headings":"","what":"Get extreme p-value — get_p_extreme","title":"Get extreme p-value — get_p_extreme","text":"Return p-value z (t) statistic string","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p_extreme.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get extreme p-value — get_p_extreme","text":"","code":"get_p_extreme(z)"},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p_extreme.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get extreme p-value — get_p_extreme","text":"z z (t) statistic","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p_extreme.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get extreme p-value — get_p_extreme","text":"Returns string (p-value)","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p_extreme.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Get extreme p-value — get_p_extreme","text":"internet (anon)","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p_extreme.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get extreme p-value — get_p_extreme","text":"","code":"z = 50 get_p_extreme(z) #> [1] \"2.16e-545\""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p_neglog10.html","id":null,"dir":"Reference","previous_headings":"","what":"Get -log10 p-value (using Z only) — get_p_neglog10","title":"Get -log10 p-value (using Z only) — get_p_neglog10","text":"Get -log10 p-value provided z statistic (p-value)","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p_neglog10.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get -log10 p-value (using Z only) — get_p_neglog10","text":"","code":"get_p_neglog10(z, is_p = FALSE)"},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p_neglog10.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get -log10 p-value (using Z only) — get_p_neglog10","text":"z Numeric. z statistic p-value. is_p Logical. Default=FALSE. p-value?","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p_neglog10.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get -log10 p-value (using Z only) — get_p_neglog10","text":"Returns -log 10 p-value","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p_neglog10.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Get -log10 p-value (using Z only) — get_p_neglog10","text":"internet (anon)","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p_neglog10.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get -log10 p-value (using Z only) — get_p_neglog10","text":"","code":"z = 50 get_p_neglog10(z) #> [1] 544.6653"},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p_neglog10_n.html","id":null,"dir":"Reference","previous_headings":"","what":"Get -log10 p-value (using Z & N) — get_p_neglog10_n","title":"Get -log10 p-value (using Z & N) — get_p_neglog10_n","text":"Get -log10 p-value provided z statistic (p-value) n","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p_neglog10_n.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get -log10 p-value (using Z & N) — get_p_neglog10_n","text":"","code":"get_p_neglog10_n(z, n, is_p = FALSE)"},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p_neglog10_n.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get -log10 p-value (using Z & N) — get_p_neglog10_n","text":"z z (t) statistic n sample size used estimate z (t) statistic is_p Logical. Default=FALSE. p-value?","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p_neglog10_n.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get -log10 p-value (using Z & N) — get_p_neglog10_n","text":"Returns -log 10 p-value","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p_neglog10_n.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Get -log10 p-value (using Z & N) — get_p_neglog10_n","text":"internet (anon)","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_p_neglog10_n.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get -log10 p-value (using Z & N) — get_p_neglog10_n","text":"","code":"z = 50 n = 100000 get_p_neglog10_n(z, n) #> [1] 537.9851"},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_se.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Standard Error from Confidence Intervals — get_se","title":"Get Standard Error from Confidence Intervals — get_se","text":"Return SE CIs","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_se.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Standard Error from Confidence Intervals — get_se","text":"","code":"get_se(lci, uci, log = FALSE, denominator = 3.919928)"},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_se.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Standard Error from Confidence Intervals — get_se","text":"lci lower confidence interval uci lower confidence interval log Log CI values? (default=FALSE) denominator standard error sample mean (default=3.92... well actually, 3.919928 `2*get_z(0.05)`)","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_se.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Standard Error from Confidence Intervals — get_se","text":"Returns SE (numeric)","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_se.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Get Standard Error from Confidence Intervals — get_se","text":"internet (anon)","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_se.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Standard Error from Confidence Intervals — get_se","text":"","code":"lci = 0.1 uci = 0.3 get_se(lci, uci) #> [1] 0.05102135"},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_z.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Z-statistic from p-value — get_z","title":"Get Z-statistic from p-value — get_z","text":"Return z-statistic given p-value","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_z.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Z-statistic from p-value — get_z","text":"","code":"get_z(p, two_sided = TRUE)"},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_z.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Z-statistic from p-value — get_z","text":"p p-value two_sided Logical, default=TRUE. Return two-sided z-value?","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_z.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Z-statistic from p-value — get_z","text":"Returns Z-statistic (numeric)","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_z.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Get Z-statistic from p-value — get_z","text":"internet (anon)","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/get_z.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Z-statistic from p-value — get_z","text":"","code":"p = 1e-10 get_z(p) #> [1] 6.466951"},{"path":"https://lcpilling.github.io/lukesRlib/reference/inv_norm.html","id":null,"dir":"Reference","previous_headings":"","what":"Inverse normalize a variable — inv_norm","title":"Inverse normalize a variable — inv_norm","text":"Inverse normalize variable (force normal distribution)","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/inv_norm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Inverse normalize a variable — inv_norm","text":"","code":"inv_norm(x)"},{"path":"https://lcpilling.github.io/lukesRlib/reference/inv_norm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Inverse normalize a variable — inv_norm","text":"x numeric vector inverse normalized","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/inv_norm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Inverse normalize a variable — inv_norm","text":"Returns vector","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/inv_norm.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Inverse normalize a variable — inv_norm","text":"Luke Pilling","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/inv_norm.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Inverse normalize a variable — inv_norm","text":"","code":"summary(example_data$sbp) #>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.  #>    80.0   116.0   130.0   132.8   144.0   270.0  sbp_in = inv_norm(example_data$sbp) summary(sbp_in) #>      Min.   1st Qu.    Median      Mean   3rd Qu.      Max.  #> -3.414738 -0.700332  0.058712  0.000381  0.664977  3.703302"},{"path":"https://lcpilling.github.io/lukesRlib/reference/theme_minimal_modified.html","id":null,"dir":"Reference","previous_headings":"","what":"Modified theme_minimal for ggplots — theme_minimal_modified","title":"Modified theme_minimal for ggplots — theme_minimal_modified","text":"Albert Rapp's blog - nice adjustments default theme minimal https://github.com/AlbertRapp/3mw_newsletters/blob/master/37_Jul_19_2023/37_Jul_19_2023.qmd?utm_source=alberts-newsletter.beehiiv.com&utm_medium=newsletter&utm_campaign=3mw-create---ggplot-theme","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/theme_minimal_modified.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Modified theme_minimal for ggplots — theme_minimal_modified","text":"","code":"theme_minimal_modified()"},{"path":"https://lcpilling.github.io/lukesRlib/reference/theme_minimal_modified.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Modified theme_minimal for ggplots — theme_minimal_modified","text":"Returns theme","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/theme_minimal_modified.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Modified theme_minimal for ggplots — theme_minimal_modified","text":"Albert Rapp","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/theme_minimal_modified.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Modified theme_minimal for ggplots — theme_minimal_modified","text":"","code":"penguins = palmerpenguins::penguins |>    dplyr::filter(!is.na(sex))  basic_plot = penguins |>    ggplot2::ggplot(ggplot2::aes(x = bill_length_mm, y = body_mass_g, fill = species)) +   ggplot2::geom_point(shape = 21, size = 5, alpha = 0.85, color = 'grey10') +   ggplot2::labs(     x = 'Bill length (in mm)',     y = ggplot2::element_blank(),     fill = 'Species',     title = 'Penguins from the Palmer Archipelago',     subtitle = 'Penguin weights (in g)',     caption = 'Data: {palmerpenguins} R package'   )  basic_plot +   ggplot2::theme_minimal(base_size = 16, base_family = 'Source Sans Pro') +   ggplot2::scale_fill_manual(values = c('Adelie'= '#da2c38', 'Chinstrap'= '#FED18C', 'Gentoo'= '#30C5FF')) +   theme_minimal_modified() #> Error in theme(panel.grid.minor = element_blank(), panel.grid.major = element_line(color = \"grey90\",     linetype = 2), plot.title.position = \"plot\", plot.caption.position = \"plot\",     plot.title = element_text(family = \"Cambria\", size = rel(1.7),         margin = margin(b = 7, unit = \"mm\")), plot.subtitle = element_text(size = rel(1.1)),     text = element_text(color = \"grey20\"), axis.text = element_text(color = \"grey30\"),     panel.background = element_rect(color = \"grey90\")): could not find function \"theme\""},{"path":"https://lcpilling.github.io/lukesRlib/reference/tidy_ci.html","id":null,"dir":"Reference","previous_headings":"","what":"Get tidy model output with fast CIs — tidy_ci","title":"Get tidy model output with fast CIs — tidy_ci","text":"default (amazing) `broom` package uses `confint()` function calculate CIs.  GLMs calculates confidence intervals via profile likelihood default.  using large datasets takes long time meaningfully alter CIs  compared simply calculating using 1.96*SE. function `tidy_ci()` runs `broom::tidy()` returns tidy estimates CIs  calculated EST +/- 1.96*SE. (Well, actually 1.959964) function also nice/useful things output: hides intercept  default, automatically detects logistic/CoxPH/CRR models exponentiates estimates,  p=0 returns extreme p string. optional outputs include -log10 p-values. tested models `glm()` `survival::coxph()` seems work well produces consistent CIs. Also works well `cmprsk::crr()`. linear mixed-effects models `lmer()` package lme4 can display fixed-effects p-values Wald CIs.","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/tidy_ci.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get tidy model output with fast CIs — tidy_ci","text":"","code":"tidy_ci(   x,   ci = TRUE,   ci_denominator = 1.959964,   exp = FALSE,   intercept = FALSE,   tidy_factors = TRUE,   extreme_ps = TRUE,   neglog10p = FALSE,   check_model = TRUE,   n = NA,   get_r2 = TRUE,   conf.int = FALSE,   quiet = FALSE,   ... )"},{"path":"https://lcpilling.github.io/lukesRlib/reference/tidy_ci.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get tidy model output with fast CIs — tidy_ci","text":"x object containing model output tidied e.g., `glm()` `survival::coxph()`. ci Logical. Default TRUE. Calculate CIs using 1.96*SE method - 1.96 can modified using `ci_denominator`. ci_denominator Numeric. Default 1.96  (actually 1.959964). standard error sample mean. exp Logical. Default FALSE. Exponentiate estimate CIs -- also see `check_model`. intercept Logical. Default FALSE. Exclude intercept tidier output. tidy_factors Logical. Default TRUE. Tidy `.factor(x_var)#` terms `x_var-#`. extreme_ps Logical. Default TRUE. p=0 return \"extreme p-values\" strings. neglog10p Logical. Default FALSE. Provides negative log10 p-values (input class `glm` `coxph` `crr` -- user can provide sample size `n=#` override). check_model Logical. Default TRUE. Set `exp=TRUE` `glm(family=binomial)` `survival::coxph()` `cmprsk::crr()` performed. n Numeric. Default NA. N `neglog10p` extracted automatically `glm` `coxph` objects - override required. get_r2 Logical. Default TRUE. get R^2 value model linear, C-statistic model CoxPH quiet Logical. Default FALSE. Suppress text output ... `tidy()` options","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/tidy_ci.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get tidy model output with fast CIs — tidy_ci","text":"Returns tibble - summary statistics model","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/tidy_ci.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Get tidy model output with fast CIs — tidy_ci","text":"Luke Pilling","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/tidy_ci.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get tidy model output with fast CIs — tidy_ci","text":"","code":"fit_linear = glm(sbp ~ age + sex + as.factor(bmi_cat), data = example_data) tidy_ci(fit_linear) #> Linear model (estimate=coefficient) :: N=4690 :: R2=0.21 #> # A tibble: 4 × 7 #>   term      estimate std.error statistic   p.value conf.low conf.high #>   <chr>        <dbl>     <dbl>     <dbl>     <dbl>    <dbl>     <dbl> #> 1 age          0.951    0.0353     26.9  1.45e-148    0.882     1.02  #> 2 sex         -1.48     0.606      -2.44 1.48e-  2   -2.67     -0.291 #> 3 bmi_cat-1    7.40     0.652      11.4  1.70e- 29    6.13      8.68  #> 4 bmi_cat-2   16.3      0.940      17.3  2.78e- 65   14.4      18.1    fit_logistic = glm(event ~ age + sex + bmi, data = example_data, family = binomial) tidy_ci(fit_logistic)   # detect model and exponentiate automatically #> Binomial model (estimate=Odds Ratio) :: N=4690, Ncases=1472 #> # A tibble: 3 × 7 #>   term  estimate std.error statistic  p.value conf.low conf.high #>   <chr>    <dbl>     <dbl>     <dbl>    <dbl>    <dbl>     <dbl> #> 1 age       1.04   0.00388      8.95 3.47e-19     1.03      1.04 #> 2 sex       2.10   0.0654      11.3  1.02e-29     1.84      2.38 #> 3 bmi       1.07   0.00801      8.66 4.74e-18     1.06      1.09"},{"path":"https://lcpilling.github.io/lukesRlib/reference/z_trans.html","id":null,"dir":"Reference","previous_headings":"","what":"Z-transform a variable — z_trans","title":"Z-transform a variable — z_trans","text":"Z-transform variable. Mean=0, SD=1. Maintains original distribution.","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/z_trans.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Z-transform a variable — z_trans","text":"","code":"z_trans(x)"},{"path":"https://lcpilling.github.io/lukesRlib/reference/z_trans.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Z-transform a variable — z_trans","text":"x numeric vector z-transformed","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/z_trans.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Z-transform a variable — z_trans","text":"Returns vector","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/z_trans.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Z-transform a variable — z_trans","text":"Luke Pilling","code":""},{"path":"https://lcpilling.github.io/lukesRlib/reference/z_trans.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Z-transform a variable — z_trans","text":"","code":"summary(example_data$sbp) #>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.  #>    80.0   116.0   130.0   132.8   144.0   270.0  sbp_in = z_trans(example_data$sbp) summary(sbp_in) #>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.  #> -2.3142 -0.7353 -0.1213  0.0000  0.4927  6.0187"},{"path":[]},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"changes-0-2-11","dir":"Changelog","previous_headings":"","what":"Changes","title":"lukesRlib 0.2.11 (30th Sept 2024)","text":"tidy_ci() now recognises tidies factor naming haven::as_factor() used instead base R .factor() get_assoc() now uses haven::as_factor() instead base R .factor() categorical exposures labels shown nicely Update dependencies include {haven} explicit tidyverse packages desired Update example data categorical variables include labels Fix NEWS formatting","code":""},{"path":[]},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"changes-0-2-10","dir":"Changelog","previous_headings":"","what":"Changes","title":"lukesRlib 0.2.10 (6th June 2024)","text":"https://lcpilling.github.io/lukesRlib https://github.com/lcpilling/lukesRlib Add options Winsorize exposure outcome Remove beep Improved verbose reporting","code":""},{"path":[]},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"bug-fixes-0-2-9","dir":"Changelog","previous_headings":"","what":"Bug fixes","title":"lukesRlib 0.2.9 (28th Feb 2024)","text":"get_assoc() - Fix fit_stat_se missing get_assoc() - Fix covariate checking interaction included formula. Resolving issue #1","code":""},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"lukesrlib-028-19th-feb-2024","dir":"Changelog","previous_headings":"","what":"lukesRlib 0.2.8 (19th Feb 2024)","title":"lukesRlib 0.2.8 (19th Feb 2024)","text":"add interacts_with argument. Default ““. User can provide variable name (string) also get interaction terms Fixed bug return_all_terms exposure factor Include SE C-statistic returning fit_stat coxph() models","code":""},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"lukesrlib-027-29th-jan-2024","dir":"Changelog","previous_headings":"","what":"lukesRlib 0.2.7 (29th Jan 2024)","title":"lukesRlib 0.2.7 (29th Jan 2024)","text":"get_assoc() - add return_all_terms argument. Default false. TRUE, adds new col terms returns estimates independent variables models. get_assoc() - remove subset_d argument get_assoc() - fixed exposure outcome needs protected backticks (previously failed variable something like “bmi-1”) get_assoc() - fixed problem covariate estimates also included certain situations (e.g., x=“age” get covariate “percentage”) Update examples many functions","code":""},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"lukesrlib-026-13-nov-2023","dir":"Changelog","previous_headings":"","what":"lukesRlib 0.2.6 (13 Nov 2023)","title":"lukesRlib 0.2.6 (13 Nov 2023)","text":"get_assoc() - fixed covariates provided get_assoc() - x y , skip (useful providing list variables twice pairwise analysis) get_assoc() - added verbose option bug checking get_assoc() - added beep option beeping finished tidy_ci() - add functionality summarizing fixed-effects lme4::lmer() Add example_data object examples. Contains ~5,000 participants Framingham Heart Study","code":""},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"lukesrlib-025-25-aug-2023","dir":"Changelog","previous_headings":"","what":"lukesRlib 0.2.5 (25 Aug 2023)","title":"lukesRlib 0.2.5 (25 Aug 2023)","text":"data |> filter(age>60) |> get_assoc(x=\"BMI\", y=\"diabetes\", z=\"sex\") Add theme theme_minimal_modified ggplots Moves dependencies “Imports” - preferred way use existing packages https://r-pkgs.org/dependencies-mindset-background.html#sec-dependencies-namespace Fix -log10p calculation","code":""},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"lukesrlib-024-30-jun-2023","dir":"Changelog","previous_headings":"","what":"lukesRlib 0.2.4 (30 Jun 2023)","title":"lukesRlib 0.2.4 (30 Jun 2023)","text":"lm = R-squared logistic = McFadden’s pseudo-R2 coxph = Harrell’s c-statistic Fix error user want provide covariates get_assoc() tidy_ci() now returns C-statistic CoxPH models default","code":""},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"lukesrlib-023-7-jun-2023","dir":"Changelog","previous_headings":"","what":"lukesRlib 0.2.3 (7 Jun 2023)","title":"lukesRlib 0.2.3 (7 Jun 2023)","text":"See https://github.com/lukepilling/gwasRtools Add annotate_textp() function use ggplot2 plots adding easy text annotation geoms Moved functions internal tidy namespace Fix get_p_extreme NaN passed rather NA","code":""},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"lukesrlib-022","dir":"Changelog","previous_headings":"","what":"lukesRlib 0.2.2","title":"lukesRlib 0.2.2","text":"Therefore {pspline} dependency can removed Set extreme_ps default FALSE get_assoc()","code":""},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"lukesrlib-021","dir":"Changelog","previous_headings":"","what":"lukesRlib 0.2.1","title":"lukesRlib 0.2.1","text":"Added p-value threshold option get_loci() Fix problem getting n get_assoc() model=\"coxph\"","code":""},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"lukesrlib-020-5-may-2023","dir":"Changelog","previous_headings":"","what":"lukesRlib 0.2.0 (5 May 2023)","title":"lukesRlib 0.2.0 (5 May 2023)","text":"get_assoc() can now perform coxph() models {survival} package. user provides strings depicting survival object outcome e.g., “Surv(time, event)” Added two genetics-related functions: lambda_gc() (calculate Lambda GC!) get_loci() (crudely determine independent loci GWAS summary stats) General improvements/clarifications throughout code documentation","code":""},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"lukesrlib-019","dir":"Changelog","previous_headings":"","what":"lukesRlib 0.1.9","title":"lukesRlib 0.1.9","text":"Added dependency {rlang} >= v1.0.0 sym() function can used - .e., using provided variable name strings dplyr::mutate() etc get_assoc() now allows options inv_norm_x inv_norm_y","code":""},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"lukesrlib-018","dir":"Changelog","previous_headings":"","what":"lukesRlib 0.1.8","title":"lukesRlib 0.1.8","text":"Changed get_assoc() x y can vectors - .e., multiple exposures/outcomes can provided. uses {purrr} function map2() iterate combinations package now depends {purrr} >= v1.0.0 & {stringr} >= v1.5.0 Added functions xv() yv() improve ease using {purrr} function map2() get_assoc() PheWAS multiple exposures outcomes one analysis","code":""},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"lukesrlib-017","dir":"Changelog","previous_headings":"","what":"lukesRlib 0.1.7","title":"lukesRlib 0.1.7","text":"Calculate R^2 tidy_ci() glm() linear regression Tidy tidy_ci() parameter documentation","code":""},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"lukesrlib-016","dir":"Changelog","previous_headings":"","what":"lukesRlib 0.1.6","title":"lukesRlib 0.1.6","text":"fixes get_assoc() (events exposure group, two factor variables included) add scale options exposure outcome get_assoc() tidy_ci() tidy variable names “scale()”","code":""},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"lukesrlib-015","dir":"Changelog","previous_headings":"","what":"lukesRlib 0.1.5","title":"lukesRlib 0.1.5","text":"tidy_ci() now tidies terms included categorical variables. “.factor(x_var)1” replaced “x_var-1”. Can disabled tidy_factors=FALSE addition “Plotting” category functions, starting doCoxSplinePlot() nicely plots output spline term CoxPH model Minor fix tidy_ci() avoid breaks due missing p-values model summary statistics","code":""},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"lukesrlib-014","dir":"Changelog","previous_headings":"","what":"lukesRlib 0.1.4","title":"lukesRlib 0.1.4","text":"Add new function get_assoc() easily run PheWAS-like analysis using tidy_ci()","code":""},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"lukesrlib-013","dir":"Changelog","previous_headings":"","what":"lukesRlib 0.1.3","title":"lukesRlib 0.1.3","text":"Updates tidy_ci() Add get_se() CIs function – simple adds collection related functions General improvements","code":""},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"lukesrlib-012","dir":"Changelog","previous_headings":"","what":"lukesRlib 0.1.2","title":"lukesRlib 0.1.2","text":"Updated method -log10 p-value calculation. One just uses Z. uses Z N.","code":""},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"lukesrlib-011","dir":"Changelog","previous_headings":"","what":"lukesRlib 0.1.1","title":"lukesRlib 0.1.1","text":"Added two new p-value related functions – simple nice available","code":""},{"path":"https://lcpilling.github.io/lukesRlib/news/index.html","id":"lukesrlib-010-26-jan-2023","dir":"Changelog","previous_headings":"","what":"lukesRlib 0.1.0 (26 Jan 2023)","title":"lukesRlib 0.1.0 (26 Jan 2023)","text":"Added NEWS.md file track changes package.","code":""}]
