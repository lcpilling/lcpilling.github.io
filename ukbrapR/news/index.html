<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • ukbrapR</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ukbrapR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ascertain_diagnoses.html">Ascertain diagnoses</a></li>
    <li><a class="dropdown-item" href="../articles/label_fields.html">Label fields</a></li>
    <li><a class="dropdown-item" href="../articles/spark_functions.html">Spark functions</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/lcpilling/ukbrapR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
      <small>Source: <a href="https://github.com/lcpilling/ukbrapR/blob/HEAD/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.5" id="ukbrapr-v035-16th-april-2025">ukbrapR v0.3.5 (16th April 2025)<a class="anchor" aria-label="anchor" href="#ukbrapr-v035-16th-april-2025"></a></h2>
<div class="section level4">
<h4 id="new-features-0-3-5">New features<a class="anchor" aria-label="anchor" href="#new-features-0-3-5"></a></h4>
<ul><li>
<code><a href="../reference/create_pgs.html">create_pgs()</a></code> can now use a local BED file of already-extracted variants. Before, it assumed the user wanted to extract the variants prior to creating the PGS.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.4" id="ukbrapr-v034-6th-april-2025">ukbrapR v0.3.4 (6th April 2025)<a class="anchor" aria-label="anchor" href="#ukbrapr-v034-6th-april-2025"></a></h2>
<div class="section level4">
<h4 id="new-features-0-3-4">New features<a class="anchor" aria-label="anchor" href="#new-features-0-3-4"></a></h4>
<ul><li>
<code><a href="../reference/make_dragen_bed.html">make_dragen_bed()</a></code> now uses the BGEN files released in April 2025 (in prior versions used the pVCFs).
<ul><li>Means when <code><a href="../reference/extract_variants.html">extract_variants()</a></code> or <code><a href="../reference/create_pgs.html">create_pgs()</a></code> are called with option <code>source="dragen"</code> this is the default.</li>
<li>If your project does not have the new BGEN files available you can use <code>ukbrapR:::make_dragen_bed_from_pvcfs()</code> to extract from the pVCFs (slow).</li>
</ul></li>
</ul></div>
<div class="section level4">
<h4 id="changes-0-3-4">Changes<a class="anchor" aria-label="anchor" href="#changes-0-3-4"></a></h4>
<ul><li>Updated internal schema to include new/updated fields.</li>
<li>Added “filename” option to <code><a href="../reference/fields_to_phenos.html">fields_to_phenos()</a></code> so that phenotype names can be written straight to a file ready for table-exporter.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.3" id="ukbrapr-v033-18th-march-2025">ukbrapR v0.3.3 (18th March 2025)<a class="anchor" aria-label="anchor" href="#ukbrapr-v033-18th-march-2025"></a></h2>
<div class="section level4">
<h4 id="new-features-0-3-3">New features<a class="anchor" aria-label="anchor" href="#new-features-0-3-3"></a></h4>
<ul><li>New function <code><a href="../reference/fields_to_phenos.html">fields_to_phenos()</a></code> takes a vector of field IDs, check they are valid, and returns all possible UK Biobank RAP phenotypes from the schema</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.2" id="ukbrapr-v032-19th-february-2025">ukbrapR v0.3.2 (19th February 2025)<a class="anchor" aria-label="anchor" href="#ukbrapr-v032-19th-february-2025"></a></h2>
<div class="section level4">
<h4 id="changes-0-3-2">Changes<a class="anchor" aria-label="anchor" href="#changes-0-3-2"></a></h4>
<ul><li>Remove bundled plink, plink2 and bgenix files. Instead, download only if needed.</li>
<li>Add more consistent progress updates for <code><a href="../reference/make_dragen_bed.html">make_dragen_bed()</a></code> and <code><a href="../reference/make_imputed_bed.html">make_imputed_bed()</a></code>
</li>
<li>Add “progress” options to <code><a href="../reference/extract_variants.html">extract_variants()</a></code> and <code><a href="../reference/create_pgs.html">create_pgs()</a></code> (default is FALSE). Default is TRUE if you directly call <code><a href="../reference/make_dragen_bed.html">make_dragen_bed()</a></code> or <code><a href="../reference/make_imputed_bed.html">make_imputed_bed()</a></code>
</li>
</ul></div>
<div class="section level4">
<h4 id="bug-fixes-0-3-2">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-3-2"></a></h4>
<ul><li>Fix <code><a href="../reference/make_dragen_bed.html">make_dragen_bed()</a></code> so it doesn’t crash if the pVCF subset is empty (i.e., a searched-for chr:pos was missing)</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.1" id="ukbrapr-v031-10th-february-2025">ukbrapR v0.3.1 (10th February 2025)<a class="anchor" aria-label="anchor" href="#ukbrapr-v031-10th-february-2025"></a></h2>
<div class="section level4">
<h4 id="bug-fixes-0-3-1">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-3-1"></a></h4>
<ul><li>Fix <code><a href="../reference/make_dragen_bed.html">make_dragen_bed()</a></code> position awk search, plink call</li>
<li>Fix <code><a href="../reference/create_pgs.html">create_pgs()</a></code> when using WGS - needed to use chr:pos:a1:a2 not rsid</li>
<li>Fix <code><a href="../reference/make_imputed_bed.html">make_imputed_bed()</a></code> so it doesn’t crash if the BGEN subset is empty (i.e., a searched-for rsid was missing)</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.3.0" id="ukbrapr-v030-29th-january-2025">ukbrapR v0.3.0 (29th January 2025)<a class="anchor" aria-label="anchor" href="#ukbrapr-v030-29th-january-2025"></a></h2>
<div class="section level4">
<h4 id="new-features-0-3-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-3-0"></a></h4>
<p>Suite of functions to extract and load genetic variants. Main ones of interest will be: 1. <code><a href="../reference/extract_variants.html">extract_variants()</a></code> takes a list of variant rsIDs as input and extracts the imputed genotypes, loading to memory. This is really a wrapper around two other new functions: <code><a href="../reference/make_imputed_bed.html">make_imputed_bed()</a></code> and <code><a href="../reference/load_bed.html">load_bed()</a></code>. Also available in <code><a href="../reference/make_dragen_bed.html">make_dragen_bed()</a></code> to extract from whole genome sequence VCF files but this is pretty slow so usually user wants imputed variants. 2. <code><a href="../reference/create_pgs.html">create_pgs()</a></code> creates a polygenic score (weighted allele score) using user-provided variants and weights. Loaded to memory but also saves a nicely formatted .tsv</p>
</div>
<div class="section level4">
<h4 id="breaking-changes-0-3-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-3-0"></a></h4>
<ul><li>Removing dependencies: reticulate, arrow, sparklyr. These take a few previous seconds to install every time and are rarely needed. Instead will be installed if user tries to use <code><a href="../reference/get_rap_phenos.html">get_rap_phenos()</a></code>
</li>
<li>
<code><a href="../reference/get_emr_spark.html">get_emr_spark()</a></code> removed entirely. Much better to use <code><a href="../reference/get_diagnoses.html">get_diagnoses()</a></code> which has had a <em>lot</em> of updates to functionality ad bud fixes.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.9" id="ukbrapr-v029-12th-january-2025">ukbrapR v0.2.9 (12th January 2025)<a class="anchor" aria-label="anchor" href="#ukbrapr-v029-12th-january-2025"></a></h2>
<div class="section level4">
<h4 id="bug-fixes-0-2-9">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-2-9"></a></h4>
<ul><li>Fixes for issue <a href="https://github.com/lcpilling/ukbrapR/issues/19" class="external-link">#19</a> (thanks to <a href="https://github.com/nsandau" class="external-link">@nsandau</a> for the help):
<ol style="list-style-type: decimal"><li>Where OPCS searches were not always performed correctly if only OPCS3/4 codes were provided.</li>
<li>When using “group_by” in <code><a href="../reference/get_df.html">get_df()</a></code> some diagnoses were incorrectly carried over between groups when different vocabs were provided for each group (condition).</li>
</ol></li>
</ul></div>
<div class="section level4">
<h4 id="updates-0-2-9">Updates<a class="anchor" aria-label="anchor" href="#updates-0-2-9"></a></h4>
<ul><li>Additional checking of <code><a href="../reference/get_diagnoses.html">get_diagnoses()</a></code> input to abort if “blank” codes are provided to the grep.</li>
<li>When getting date first from self-reported illness data exclude “year” if &lt; 1936 (earliest birth year for any participant)</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.8" id="ukbrapr-v028-05-october-2024">ukbrapR v0.2.8 (05 October 2024)<a class="anchor" aria-label="anchor" href="#ukbrapr-v028-05-october-2024"></a></h2>
<div class="section level4">
<h4 id="bug-fixes-0-2-8">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-2-8"></a></h4>
<ul><li>Baseline dates TSV is now correctly located even if user changes working directory</li>
<li>HES operations dates were sometimes parsed as character - this is now fixed to parse as dates</li>
</ul></div>
<div class="section level4">
<h4 id="updates-0-2-8">Updates<a class="anchor" aria-label="anchor" href="#updates-0-2-8"></a></h4>
<ul><li>Warnings relating to parsing issues during grepping that are safe to ignore are now suppressed</li>
<li>Updates to documentation / examples / pkgdown site</li>
<li>New website articles to <code>ascertain_diagnoses</code>, <code>label_fields</code> and for <code>spark_functions</code>
</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.7" id="ukbrapr-v027-30-september-2024">ukbrapR v0.2.7 (30 September 2024)<a class="anchor" aria-label="anchor" href="#ukbrapr-v027-30-september-2024"></a></h2>
<div class="section level4">
<h4 id="updates-0-2-7">Updates<a class="anchor" aria-label="anchor" href="#updates-0-2-7"></a></h4>
<ul><li>New function <code><a href="../reference/label_ukb_field.html">label_ukb_field()</a></code> allows user to add titles and labels to UK Biobank fields provided as integers but are categorical.</li>
<li>New function <code><a href="../reference/label_ukb_fields.html">label_ukb_fields()</a></code> is a wrapper for the above. User just provides a data frame containing UK Biobank fields, and they all get formatted with titles (and labels if categorical).</li>
<li>Data from the UK Biobank schema (<a href="https://biobank.ctsu.ox.ac.uk/crystal/schema.cgi" class="external-link uri">https://biobank.ctsu.ox.ac.uk/crystal/schema.cgi</a>) are stored internally in <code>ukbrapR:::ukb_schema</code>
</li>
<li>{haven} dependency added for labelling</li>
<li>Exported <code>baseline_dates.tsv</code> now also includes the assessment centres for completeness (but keeps the same filename to avoid any issues for current projects relying on already-exported files)</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.6" id="ukbrapr-v026-16-september-2024">ukbrapR v0.2.6 (16 September 2024)<a class="anchor" aria-label="anchor" href="#ukbrapr-v026-16-september-2024"></a></h2>
<div class="section level4">
<h4 id="bug-fix-0-2-6">Bug fix<a class="anchor" aria-label="anchor" href="#bug-fix-0-2-6"></a></h4>
<ul><li>Fix for issue <a href="https://github.com/lcpilling/ukbrapR/issues/10" class="external-link">#10</a>. Grep issues if user provided only Read2 or CTV3 codes, if Read2 or CTV3 were &lt;5 characters, or if Read2/CTV3 codes contained a hyphen. Thanks to <a href="https://github.com/Simon-Leyss" class="external-link">@Simon-Leyss</a> for highlighting.</li>
<li>Fix for issue <a href="https://github.com/lcpilling/ukbrapR/issues/11" class="external-link">#11</a>. When getting self-reported illness codes there was a problem joining the tables if user only provided cancer codes. Thanks to <a href="https://github.com/LauricF" class="external-link">@LauricF</a> for highlighting.</li>
<li>Fix for when both types self-reported illness codes were provided. (Incorrect subsetting to just those codes provided after pivoting the long object.)</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.5" id="ukbrapr-v025-07-september-2024">ukbrapR v0.2.5 (07 September 2024)<a class="anchor" aria-label="anchor" href="#ukbrapr-v025-07-september-2024"></a></h2>
<div class="section level4">
<h4 id="bug-fix-0-2-5">Bug fix<a class="anchor" aria-label="anchor" href="#bug-fix-0-2-5"></a></h4>
<ul><li>When getting the date first cancer registry diagnosis, some rows were duplicated. This is now fixed so only one row per participant (the date first for any matched cancer ICD10) is returned.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.4" id="ukbrapr-v024-05-september-2024">ukbrapR v0.2.4 (05 September 2024)<a class="anchor" aria-label="anchor" href="#ukbrapr-v024-05-september-2024"></a></h2>
<div class="section level4">
<h4 id="changes-0-2-4">Changes<a class="anchor" aria-label="anchor" href="#changes-0-2-4"></a></h4>
<ul><li>Updated internal paths for my servers <code>indy</code> and <code>snow</code> (for ongoing projects whilst we can still use local files…)</li>
<li>Updated how <code><a href="../reference/get_diagnoses.html">get_diagnoses()</a></code> and <code><a href="../reference/get_df.html">get_df()</a></code> handle a user-provided <code>file_paths</code> object</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.3" id="ukbrapr-v023-22-august-2024">ukbrapR v0.2.3 (22 August 2024)<a class="anchor" aria-label="anchor" href="#ukbrapr-v023-22-august-2024"></a></h2>
<div class="section level4">
<h4 id="bug-fixes-0-2-3">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-2-3"></a></h4>
<ul><li>Fix for issue <a href="https://github.com/lcpilling/ukbrapR/issues/8" class="external-link">#8</a>. In moving the HES ICD10 code block below the cancer registry code I acctidently put it within the <code>if (get_canreg)  { }</code> condition. Thanks to <a href="https://github.com/LauricF" class="external-link">@LauricF</a> for highlighting.</li>
<li>Fix bullet points in pkgdown version of docs</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.2" id="ukbrapr-v022-21-august-2024">ukbrapR v0.2.2 (21 August 2024)<a class="anchor" aria-label="anchor" href="#ukbrapr-v022-21-august-2024"></a></h2>
<div class="section level4">
<h4 id="update-0-2-2">Update<a class="anchor" aria-label="anchor" href="#update-0-2-2"></a></h4>
<ul><li>The HESIN diagnosis search can now also include ICD9 codes in the provided codes data frame. These use fuzzy matching (similar to the ICD10s) so that searching for “280” also returns “2809” etc</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.1" id="ukbrapr-v021-10-august-2024">ukbrapR v0.2.1 (10 August 2024)<a class="anchor" aria-label="anchor" href="#ukbrapr-v021-10-august-2024"></a></h2>
<div class="section level4">
<h4 id="bug-fix-0-2-1">Bug fix<a class="anchor" aria-label="anchor" href="#bug-fix-0-2-1"></a></h4>
<ul><li>Fix for issue <a href="https://github.com/lcpilling/ukbrapR/issues/5" class="external-link">#5</a>. The file paths for exported tables were not correctly specified in later calls of <code><a href="../reference/get_diagnoses.html">get_diagnoses()</a></code> when the working directory is not the home directory. Thanks to <a href="https://github.com/LauricF" class="external-link">@LauricF</a> for highlighting.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.0" id="ukbrapr-v020-30-july-2024">ukbrapR v0.2.0 (30 July 2024)<a class="anchor" aria-label="anchor" href="#ukbrapr-v020-30-july-2024"></a></h2>
<p>This is a major update as I move away from using Spark as the default environment, mostly due to the cost implications; it is significantly cheaper (and quicker!) to store and search exported raw text files in the RAP persistant storage than do everything in a Spark environment (plus the added benefit that the RStudio interface is available in “normal” instances).</p>
<p>The Spark functions are available as before but all updates are to improve functionality in “normal” instances using RStudio, as we move to the new era of RAP-only UK Biobank analysis.</p>
<div class="section level4">
<h4 id="changes-0-2-0">Changes<a class="anchor" aria-label="anchor" href="#changes-0-2-0"></a></h4>
<ul><li>Added internal data frame containing default paths for exported files in a RAP project (view with <code>ukbrapR:::ukbrapr_paths</code>)</li>
<li>Added function <code><a href="../reference/export_tables.html">export_tables()</a></code> which only needs to be run once when a new project is created. This submits the required table exporter commands to extract each of the tables in <code>ukbrapR:::ukbrapr_paths</code>. This can take ~15 minutes to export all the tables. ~10Gb of text files are created. This will cost ~£0.15 per month to store in the RAP standard storage.</li>
<li>
<code>get_emr()</code> is split into two primary underlying functions: <code><a href="../reference/get_emr_spark.html">get_emr_spark()</a></code> which has not changed, and <code>get_emr()</code> which is the “new way” (i.e., <code>get_emr_local()</code> is entirely removed)</li>
<li>Added functionality for <code>hesin_oper</code> (HES OPCS operations) searching for ICD10 codes in <code>get_emr()</code>
</li>
<li>New/updated internal functions <code>get_cancer_registry()</code> asceratains cases using ICD10s in the <code>cancer_registry</code> data, and works much the same as <code>get_selfrep_illness()</code>
</li>
<li>New function <code><a href="../reference/get_diagnoses.html">get_diagnoses()</a></code> is a wrapper to get HES diagnosis, operations, cause of death, GP, cancer registry, and self-reported illness data – i.e., once function to provide all codes to, and return all health-related data</li>
<li>
<code><a href="../reference/get_df.html">get_df()</a></code> takes all output from <code><a href="../reference/get_diagnoses.html">get_diagnoses()</a></code> i.e., now also identifies date of first in matched <code>cancer_registry</code> and <code>hesin_oper</code> entries, in addition to <code>hes_diag</code>, <code>gp_clinical</code>, <code>death_cause</code> and <code>selfrep_illness</code> as before.</li>
<li>When getting “date first” using <code><a href="../reference/get_df.html">get_df()</a></code> the baseline data is used to create binary case/control variables (for ever and prevalent), and for controls the censoring date is included in the overall <code>_df</code> variable (default is 30-10-2022).</li>
</ul><p><strong>To make it absolutely clear:</strong> the Spark function <code><a href="../reference/get_emr_spark.html">get_emr_spark()</a></code> has not been updated but I am no longer focussed on doing things this way. If you want to submit Pull Requests to improve functions please do. The below changes are to substantially improve the experience of using exported tables in the RAP environment only (if you have all the data on a local system already it will work, assuming you format correctly and provide the paths, but the RAP is the future).</p>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.7" id="ukbrapr-v017-28-july-2024">ukbrapR v0.1.7 (28 July 2024)<a class="anchor" aria-label="anchor" href="#ukbrapr-v017-28-july-2024"></a></h2>
<div class="section level4">
<h4 id="bug-fixes-0-1-7">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-1-7"></a></h4>
<ul><li>Fix Spark database error when &gt;1 dataset file is available. Fixes issue <a href="https://github.com/lcpilling/ukbrapR/issues/3" class="external-link">#3</a></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.6" id="ukbrapr-v016-03-july-2024">ukbrapR v0.1.6 (03 July 2024)<a class="anchor" aria-label="anchor" href="#ukbrapr-v016-03-july-2024"></a></h2>
<div class="section level4">
<h4 id="bug-fixes-0-1-6">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-1-6"></a></h4>
<ul><li>Fix <code><a href="../reference/get_df.html">get_df()</a></code> error when ascertaining GP diagnoses if 7-character codes were provided rather than 5</li>
</ul></div>
<div class="section level4">
<h4 id="changes-0-1-6">Changes<a class="anchor" aria-label="anchor" href="#changes-0-1-6"></a></h4>
<ul><li>
<code>get_emr()</code> now accepts option “file_paths” - if not provided, attempts to get from Spark</li>
<li>Improve documentation and examples</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.5" id="ukbrapr-v015-01-july-2024">ukbrapR v0.1.5 (01 July 2024)<a class="anchor" aria-label="anchor" href="#ukbrapr-v015-01-july-2024"></a></h2>
<div class="section level4">
<h4 id="bug-fixes-0-1-5">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-1-5"></a></h4>
<ul><li>Fix <code><a href="../reference/get_df.html">get_df()</a></code> error occurring when not all sources are desired</li>
</ul></div>
<div class="section level4">
<h4 id="changes-0-1-5">Changes<a class="anchor" aria-label="anchor" href="#changes-0-1-5"></a></h4>
<ul><li>
<code>get_emr_local()</code> option “local_paths” is now “file_paths”</li>
<li>Improve documentation and examples</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.4" id="ukbrapr-v014-12-june-2024">ukbrapR v0.1.4 (12 June 2024)<a class="anchor" aria-label="anchor" href="#ukbrapr-v014-12-june-2024"></a></h2>
<div class="section level4">
<h4 id="bug-fixes-0-1-4">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-1-4"></a></h4>
<ul><li>Fix problem identifying ICD10 column name in RAP HESIN</li>
<li>Fix problem getting date first for GP data (excluding missing dates before summarizing)</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.3" id="ukbrapr-v013-8-june-2024">ukbrapR v0.1.3 (8 June 2024)<a class="anchor" aria-label="anchor" href="#ukbrapr-v013-8-june-2024"></a></h2>
<div class="section level4">
<h4 id="new-feature-0-1-3">New feature<a class="anchor" aria-label="anchor" href="#new-feature-0-1-3"></a></h4>
<ul><li>It is quicker/easier to ascertain multiple conditions at once to supply <code>get_emr()</code> with all the codes (as before), but now can use <code><a href="../reference/get_df.html">get_df()</a></code> with option “group_by” to indicate the condition names in the <code>codes_df</code> object provided. See documentation.</li>
</ul></div>
<div class="section level4">
<h4 id="changes-0-1-3">Changes<a class="anchor" aria-label="anchor" href="#changes-0-1-3"></a></h4>
<ul><li>It is no longer possible to provide custom names for the <code>codes_df</code> to <code>get_emr()</code> – these now must be <code>vocab_id</code> and <code>code</code> – makes things much simpler.</li>
<li>Remove ICD9 code from <code>codes_df_hh</code> example as these are not currently used</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.2" id="ukbrapr-v012-6-june-2024">ukbrapR v0.1.2 (6 June 2024)<a class="anchor" aria-label="anchor" href="#ukbrapr-v012-6-june-2024"></a></h2>
<div class="section level4">
<h4 id="new-features-0-1-2">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-2"></a></h4>
<ul><li>New function <code>get_emr_local()</code>. If the user has text files for <code>hesin_diag</code> and <code>gp_clinical</code> etc. these can be searched (rather than Apache Spark queries). This therefore can work on “normal” DNAnexus nodes, or local servers. Most downstream functions also do not rely on Spark clusters if data extracts are available.</li>
</ul></div>
<div class="section level4">
<h4 id="changes-0-1-2">Changes<a class="anchor" aria-label="anchor" href="#changes-0-1-2"></a></h4>
<ul><li>Change URL to reflect my GitHub username change from <code>lukepilling</code> to <code>lcpilling</code> to be more consistent between different logins, websites, and social media – <a href="https://lcpilling.github.io/ukbrapR" class="uri">https://lcpilling.github.io/ukbrapR</a> – <a href="https://github.com/lcpilling/ukbrapR" class="external-link uri">https://github.com/lcpilling/ukbrapR</a>
</li>
<li>Added dependency {cli} for improved alert/error reporting</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.1" id="ukbrapr-v011-6-march-2024">ukbrapR v0.1.1 (6 March 2024)<a class="anchor" aria-label="anchor" href="#ukbrapr-v011-6-march-2024"></a></h2>
<div class="section level4">
<h4 id="new-features-0-1-1">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-1"></a></h4>
<ul><li>New argument “prefix” for <code><a href="../reference/get_df.html">get_df()</a></code> - user can provide a string to prefix to the output variable names</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0" id="ukbrapr-v010-21-feb-2024">ukbrapR v0.1.0 (21 Feb 2024)<a class="anchor" aria-label="anchor" href="#ukbrapr-v010-21-feb-2024"></a></h2>
<div class="section level4">
<h4 id="new-features-0-1-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-0"></a></h4>
<ul><li>
<code>get_selfrep_illness()</code> - gets illness information from self-report fields. Derives a “date first” from the age/year reported, incorporating all visits for the participant</li>
<li>Two example code lists are incuded: <code>codes_df_ckd</code> (GEMINI CKD), and <code>codes_df_hh</code> (haemochromatosis, with self-report)</li>
</ul></div>
<div class="section level4">
<h4 id="changes-0-1-0">Changes<a class="anchor" aria-label="anchor" href="#changes-0-1-0"></a></h4>
<ul><li>
<code>get_emr_df()</code> is re-named <code><a href="../reference/get_df.html">get_df()</a></code> to reflect it can now include information from self-reported illness</li>
<li>
<code>get_emr_diagnoses()</code> is re-named <code>get_emr()</code> to reflect it actually retrieves any record in <code>gp_clinical</code> not just diagnoses (e.g., BMI if appropriate codes provided)</li>
</ul></div>
<div class="section level4">
<h4 id="bug-fixes-0-1-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-1-0"></a></h4>
<ul><li>So many</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.2" id="ukbrapr-v002-14-nov-2023">ukbrapR v0.0.2 (14 Nov 2023)<a class="anchor" aria-label="anchor" href="#ukbrapr-v002-14-nov-2023"></a></h2>
<div class="section level4">
<h4 id="new-features-0-0-2">New features<a class="anchor" aria-label="anchor" href="#new-features-0-0-2"></a></h4>
<ul><li>
<code>get_emr_diagnoses()</code> - function to get electronic medical records diagnoses from Spark-based death records, hospital episode statistics, and primary care (GP) databases.</li>
<li>
<code>get_emr_df()</code> - function to get date first diagnosed with any provided code from any above Electronic Medical Record source.</li>
</ul></div>
<div class="section level4">
<h4 id="bug-fixes-0-0-2">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-0-2"></a></h4>
<ul><li>Extra input checking in <code><a href="../reference/get_rap_phenos.html">get_rap_phenos()</a></code> and output more consistent for direct use with <code>get_emr_*()</code> functions</li>
<li>Updated URL for example CKD clinical codes</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.1" id="ukbrapr-v001-26-oct-2023">ukbrapR v0.0.1 (26 Oct 2023)<a class="anchor" aria-label="anchor" href="#ukbrapr-v001-26-oct-2023"></a></h2>
<p>Initial release containing two functions: - <code><a href="../reference/get_rap_phenos.html">get_rap_phenos()</a></code> - <code><a href="../reference/upload_to_rap.html">upload_to_rap()</a></code></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://lcpilling.github.io" class="external-link">Luke Pilling</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

